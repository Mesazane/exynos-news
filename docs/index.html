<!DOCTYPE html>
<html>
<head>
  <title>Exynos-News Terminal</title>
  <link rel="stylesheet" href="assets/crt.css">
  <link rel="stylesheet" href="assets/github.css">
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono&display=swap" rel="stylesheet">
  <style>
    .terminal-post {
      background: rgba(0,30,0,0.2);
      border-left: 3px solid #00ff00;
      padding: 1rem;
      margin: 1rem 0;
      font-family: 'JetBrains Mono', monospace;
    }
    .post-meta {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 1rem;
      margin: 0.5rem 0;
      font-size: 0.9em;
    }
    .post-meta span {
      color: #6a9955;
    }
    #live-feed {
      border-top: 1px dashed #3a3a3a;
      padding-top: 1rem;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>> Welcome to Exynos-News_</h1>
      <p>> Community-driven updates for Exynos devices</p>
    </header>

    <div id="live-feed">
      <h2>> Live Feed <span id="update-status"></span></h2>
      <div id="dynamic-content">
        <p>> Connecting to update server... <span class="blink">_</span></p>
      </div>
    </div>

    <!-- Static navigation remains -->
  </div>

  <script>
    const renderPost = (post) => `
      <div class="terminal-post">
        <h3><a href="news/${post.path}">${post.title}</a></h3>
        <div class="post-meta">
          <div><span>Device:</span> ${post.device || 'Generic'}</div>
          <div><span>ROM:</span> ${post.rom || 'N/A'}</div>
          <div><span>Published:</span> ${post.date}</div>
        </div>
      </div>
    `;

    const loadIndex = async () => {
      try {
        const res = await fetch(`news/_index.json?t=${Date.now()}`);
        const data = await res.json();
        
        document.getElementById('dynamic-content').innerHTML = 
          data.posts.slice(0, 5).map(renderPost).join('');
          
        document.getElementById('update-status').innerHTML = 
          `[Last update: ${new Date(data.generated_at).toLocaleTimeString()}]`;
          
      } catch (error) {
        document.getElementById('dynamic-content').innerHTML = `
          <div class="warning">
            <p>! Network error: ${error.message}</p>
            <p>> <a href="news/current/">Browse manually</a>_</p>
          </div>
        `;
      }
    };

    // Initialize with auto-refresh
    loadIndex();
    setInterval(loadIndex, 300000);  // 5 minutes
  </script>
</body>
</html>